{"version":3,"file":"static/js/658.4d8a192f.chunk.js","mappings":"+VACMA,EAASC,OAAOC,IAAI,eACpBF,KAAUG,aACZA,WAAWH,IAAUI,EAAAA,EAAAA,eAAc,OAKhC,IAAMC,EAAgBF,WAAWH,G,oCCPlCM,EAAc,CAChBC,QAAS,OACTC,IAAK,MACLC,MAAO,QACPC,KAAM,QAEJC,EAAY,CAAC,E,UCPU,CACzB,WACA,WACA,SACA,UACA,aACA,aACA,YACA,YACA,aACA,UACA,WACA,SACA,QACA,WACA,QACA,cACA,SACA,UACA,iBACA,eACA,SACA,WACA,cACA,SACA,gBACA,YACA,YACA,aACA,YACA,YACA,gBACA,aACA,gBACA,aACA,oBACA,kBACA,aACA,YACA,YACA,mBACA,WACA,YACA,gBACA,YACA,cACA,UACA,SACA,SACA,cACA,mBACA,aACA,YACA,cACA,YACA,mBACA,aACA,YACA,iBACA,cACA,cACA,YACA,iBACA,qBACA,mBACA,oBACA,gBACA,qBACA,uBACA,mBACA,cACA,kBACA,iBACA,wBACA,kBACA,gBACA,kBACA,kBACA,gBACA,mBACA,uBACA,uBACA,qBACA,KACA,iBACA,qBACA,4BACA,0BACA,iBACA,gBACA,UACA,iBACA,YACA,gBACA,UACA,iBACA,cACA,gBACA,gBACA,oBACA,sBACA,uBACA,UACA,WACA,WACA,sBACA,cACA,MACA,eACA,mBACA,gBACA,cACA,cACA,YACA,kBACA,YACA,oBACA,mBACA,oBACA,mBACA,eACA,aACA,eACA,cACA,mBACA,sBACA,kBACA,WACA,WACA,WACA,aACA,SACA,gBACA,iBACA,cACA,eACA,eACA,kBACA,WACA,qBACA,iBACA,oBACA,WACA,WACA,gBACA,aACA,uBACA,oBACA,aACA,cACA,YACA,WACA,mBACA,iBACA,iBACA,aACA,oBACA,oBACA,mBACA,cACA,oBACA,oBACA,mBACA,eACA,sBACA,cACA,mBACA,iBACA,cACA,iBACA,gBACA,gB,IDnKJ,IAAK,EAAL,qBAAiC,KAAtBC,EAAsB,QAC7BD,EAAUC,EAAIC,eAAiBD,CAClC,C,+BACD,IAAME,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","sources":["../node_modules/@liqvid/keymap/dist/esm/react.mjs","../node_modules/@liqvid/keymap/dist/esm/index.mjs","../node_modules/@liqvid/keymap/dist/esm/mixedCaseVals.mjs","../node_modules/@lqv/codemirror/dist/esm/extensions.mjs","../node_modules/@lqv/codebooth/dist/esm/components/Record.mjs","../node_modules/@liqvid/utils/dist/esm/replay-data.mjs","@development/Record.tsx","@development/index.js"],"sourcesContent":["import { createContext, useContext } from \"react\";\nconst symbol = Symbol.for(\"@lqv/keymap\");\nif (!(symbol in globalThis)) {\n    globalThis[symbol] = createContext(null);\n}\n/**\n * {@link React.Context} used to access ambient Keymap\n */\nexport const KeymapContext = globalThis[symbol];\n/** Access the ambient {@link Keymap} */\nexport function useKeymap() {\n    return useContext(KeymapContext);\n}\n","import { mixedCaseVals } from \"./mixedCaseVals.mjs\";\nconst modifierMap = {\n    Control: \"Ctrl\",\n    Alt: \"Alt\",\n    Shift: \"Shift\",\n    Meta: \"Meta\"\n};\nconst mixedCase = {};\nfor (const key of mixedCaseVals) {\n    mixedCase[key.toLowerCase()] = key;\n}\nconst modifierOrder = Object.keys(modifierMap).map(k => modifierMap[k]);\nconst useCode = [\n    \"Backspace\",\n    \"Enter\",\n    \"Space\",\n    \"Tab\"\n];\n/** Maps keyboard shortcuts to actions */\nexport class Keymap {\n    constructor() {\n        this.__bindings = {};\n    }\n    /** Given a KeyboardEvent, returns a shortcut sequence matching that event. */\n    static identify(e) {\n        const parts = [];\n        for (const modifier in modifierMap) {\n            if (e.getModifierState(modifier)) {\n                parts.push(modifierMap[modifier]);\n            }\n        }\n        if (e.key in modifierMap) {\n        }\n        else if (e.code.startsWith(\"Digit\")) {\n            parts.push(e.code.slice(5));\n        }\n        else if (e.code.startsWith(\"Key\")) {\n            parts.push(e.code.slice(3));\n        }\n        else if (useCode.includes(e.code)) {\n            parts.push(e.code);\n        }\n        else {\n            parts.push(e.key);\n        }\n        return parts.join(\"+\");\n    }\n    /** Returns a canonical form of the shortcut sequence. */\n    static normalize(seq) {\n        return seq.split(\"+\").map(str => {\n            const lower = str.toLowerCase();\n            if (str === \"\")\n                return \"\";\n            if (mixedCase[lower]) {\n                return mixedCase[lower];\n            }\n            return str[0].toUpperCase() + lower.slice(1);\n        }).sort((a, b) => {\n            if (modifierOrder.includes(a)) {\n                if (modifierOrder.includes(b)) {\n                    return modifierOrder.indexOf(a) - modifierOrder.indexOf(b);\n                }\n                else {\n                    return -1;\n                }\n            }\n            else if (modifierOrder.includes(b)) {\n                return 1;\n            }\n            else {\n                return cmp(a, b);\n            }\n        }).join(\"+\");\n    }\n    /**\n     * Bind a handler to be called when the shortcut sequence is pressed.\n     * @param seq Shortcut sequence\n     * @param cb Callback function\n     */\n    bind(seq, cb) {\n        if (seq.indexOf(\",\") > -1) {\n            for (const atomic of seq.split(\",\")) {\n                this.bind(atomic, cb);\n            }\n            return;\n        }\n        seq = Keymap.normalize(seq);\n        if (!this.__bindings.hasOwnProperty(seq)) {\n            this.__bindings[seq] = [];\n        }\n        this.__bindings[seq].push(cb);\n    }\n    /**\n     * Unbind a handler from a shortcut sequence.\n     * @param seq Shortcut sequence\n     * @param cb Handler to unbind\n     */\n    unbind(seq, cb) {\n        if (seq.indexOf(\",\") > -1) {\n            for (const atomic of seq.split(\",\")) {\n                this.unbind(atomic, cb);\n            }\n            return;\n        }\n        seq = Keymap.normalize(seq);\n        if (!this.__bindings.hasOwnProperty(seq))\n            throw new Error(`${seq} is not bound`);\n        const index = this.__bindings[seq].indexOf(cb);\n        if (index < 0) {\n            throw new Error(`${seq} is not bound to ${cb.name ?? \"callback\"}`);\n        }\n        this.__bindings[seq].splice(index, 1);\n        if (this.__bindings[seq].length === 0) {\n            delete this.__bindings[seq];\n        }\n    }\n    /** Return all shortcut sequences with handlers bound to them. */\n    getKeys() {\n        return Object.keys(this.__bindings);\n    }\n    /** Get the list of handlers for a given shortcut sequence. */\n    getHandlers(seq) {\n        if (!this.__bindings.hasOwnProperty(seq))\n            return [];\n        return this.__bindings[seq].slice();\n    }\n    /** Dispatches all handlers matching the given event. */\n    handle(e) {\n        const seq = Keymap.identify(e);\n        if (!this.__bindings[seq] && !this.__bindings[\"*\"])\n            return;\n        if (this.__bindings[seq]) {\n            e.preventDefault();\n            for (const cb of this.__bindings[seq]) {\n                cb(e);\n            }\n        }\n        if (this.__bindings[\"*\"]) {\n            for (const cb of this.__bindings[\"*\"]) {\n                cb(e);\n            }\n        }\n    }\n}\n/**\n * Returns -1 if a < b, 0 if a === b, and 1 if a > b.\n */\nfunction cmp(a, b) {\n    if (a < b)\n        return -1;\n    else if (a === b)\n        return 0;\n    return 1;\n}\n","export const mixedCaseVals = [\n    \"AltGraph\",\n    \"CapsLock\",\n    \"FnLock\",\n    \"NumLock\",\n    \"ScrollLock\",\n    \"SymbolLock\",\n    \"ArrowDown\",\n    \"ArrowLeft\",\n    \"ArrowRight\",\n    \"ArrowUp\",\n    \"PageDown\",\n    \"PageUp\",\n    \"CrSel\",\n    \"EraseEof\",\n    \"ExSel\",\n    \"ContextMenu\",\n    \"ZoomIn\",\n    \"ZoomOut\",\n    \"BrightnessDown\",\n    \"BrightnessUp\",\n    \"LogOff\",\n    \"PowerOff\",\n    \"PrintScreen\",\n    \"WakeUp\",\n    \"AllCandidates\",\n    \"CodeInput\",\n    \"FinalMode\",\n    \"GroupFirst\",\n    \"GroupLast\",\n    \"GroupNext\",\n    \"GroupPrevious\",\n    \"ModeChange\",\n    \"NextCandidate\",\n    \"NonConvert\",\n    \"PreviousCandidate\",\n    \"SingleCandidate\",\n    \"HangulMode\",\n    \"HanjaMode\",\n    \"JunjaMode\",\n    \"HiraganaKatakana\",\n    \"KanaMode\",\n    \"KanjiMode\",\n    \"ZenkakuHanaku\",\n    \"AppSwitch\",\n    \"CameraFocus\",\n    \"EndCall\",\n    \"GoBack\",\n    \"GoHome\",\n    \"HeadsetHook\",\n    \"LastNumberRedial\",\n    \"MannerMode\",\n    \"VoiceDial\",\n    \"ChannelDown\",\n    \"ChannelUp\",\n    \"MediaFastForward\",\n    \"MediaPause\",\n    \"MediaPlay\",\n    \"MediaPlayPause\",\n    \"MediaRecord\",\n    \"MediaRewind\",\n    \"MediaStop\",\n    \"MediaTrackNext\",\n    \"MediaTrackPrevious\",\n    \"AudioBalanceLeft\",\n    \"AudioBalanceRight\",\n    \"AudioBassDown\",\n    \"AudioBassBoostDown\",\n    \"AudioBassBoostToggle\",\n    \"AudioBassBoostUp\",\n    \"AudioBassUp\",\n    \"AudioFaderFront\",\n    \"AudioFaderRear\",\n    \"AudioSurroundModeNext\",\n    \"AudioTrebleDown\",\n    \"AudioTrebleUp\",\n    \"AudioVolumeDown\",\n    \"AudioVolumeMute\",\n    \"AudioVolumeUp\",\n    \"MicrophoneToggle\",\n    \"MicrophoneVolumeDown\",\n    \"MicrophoneVolumeMute\",\n    \"MicrophoneVolumeUp\",\n    \"TV\",\n    \"TVAntennaCable\",\n    \"TVAudioDescription\",\n    \"TVAudioDescriptionMixDown\",\n    \"TVAudioDescriptionMixUp\",\n    \"TVContentsMenu\",\n    \"TVDataService\",\n    \"TVInput\",\n    \"TVMediaContext\",\n    \"TVNetwork\",\n    \"TVNumberEntry\",\n    \"TVPower\",\n    \"TVRadioService\",\n    \"TVSatellite\",\n    \"TVSatelliteBS\",\n    \"TVSatelliteCS\",\n    \"TVSatelliteToggle\",\n    \"TVTerrestrialAnalog\",\n    \"TVTerrestrialDigital\",\n    \"TVTimer\",\n    \"AVRInput\",\n    \"AVRPower\",\n    \"ClosedCaptionToggle\",\n    \"DisplaySwap\",\n    \"DVR\",\n    \"GuideNextDay\",\n    \"GuidePreviousDay\",\n    \"InstantReplay\",\n    \"ListProgram\",\n    \"LiveContent\",\n    \"MediaApps\",\n    \"MediaAudioTrack\",\n    \"MediaLast\",\n    \"MediaSkipBackward\",\n    \"MediaSkipForward\",\n    \"MediaStepBackward\",\n    \"MediaStepForward\",\n    \"MediaTopMenu\",\n    \"NavigateIn\",\n    \"NavigateNext\",\n    \"NavigateOut\",\n    \"NavigatePrevious\",\n    \"NextFavoriteChannel\",\n    \"NextUserProfile\",\n    \"OnDemand\",\n    \"PinPDown\",\n    \"PinPMove\",\n    \"PinPToggle\",\n    \"PinPUp\",\n    \"PlaySpeedDown\",\n    \"PlaySpeedReset\",\n    \"PlaySpeedUp\",\n    \"RandomToggle\",\n    \"RcLowBattery\",\n    \"RecordSpeedNext\",\n    \"RfBypass\",\n    \"ScanChannelsToggle\",\n    \"ScreenModeNext\",\n    \"SplitScreenToggle\",\n    \"STBInput\",\n    \"STBPower\",\n    \"VideoModeNext\",\n    \"ZoomToggle\",\n    \"SpeechCorrectionList\",\n    \"SpeechInputToggle\",\n    \"SpellCheck\",\n    \"MailForward\",\n    \"MailReply\",\n    \"MailSend\",\n    \"LaunchCalculator\",\n    \"LaunchCalendar\",\n    \"LaunchContacts\",\n    \"LaunchMail\",\n    \"LaunchMediaPlayer\",\n    \"LaunchMusicPlayer\",\n    \"LaunchMyComputer\",\n    \"LaunchPhone\",\n    \"LaunchScreenSaver\",\n    \"LaunchSpreadsheet\",\n    \"LaunchWebBrowser\",\n    \"LaunchWebCam\",\n    \"LaunchWordProcessor\",\n    \"BrowserBack\",\n    \"BrowserFavorites\",\n    \"BrowserForward\",\n    \"BrowserHome\",\n    \"BrowserRefresh\",\n    \"BrowserSearch\",\n    \"BrowserStop\"\n];\n","import { Keymap } from \"@liqvid/keymap\";\n/**\n * Handle key sequences in `seqs` even if key capture is suspended.\n * @param keymap {@link Keymap} to handle key sequences.\n * @param seqs Key sequences to handle.\n */\nexport function passThrough(keymap, seqs = []) {\n    return seqs.map((key) => {\n        const can = cm2lv(key);\n        // argh\n        const fake = new KeyboardEvent(\"keydown\");\n        return {\n            key,\n            run: () => {\n                const handlers = keymap.getHandlers(can);\n                for (const cb of handlers) {\n                    cb(fake);\n                }\n                return false;\n            },\n        };\n    });\n}\n/**\n * Convert CodeMirror key sequences to Liqvid format.\n */\nconst mac = navigator.platform === \"MacIntel\";\nfunction cm2lv(seq) {\n    seq = seq.replace(\"Mod\", mac ? \"Meta\" : \"Ctrl\");\n    seq = seq.replace(/-/g, \"+\");\n    return Keymap.normalize(seq);\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { keymap } from \"@codemirror/view\";\nimport { useKeymap } from \"@liqvid/keymap/react\";\nimport { selectCmd } from \"@lqv/codemirror\";\nimport { passThrough } from \"@lqv/codemirror/extensions\";\nimport { useEffect, useMemo } from \"react\";\nimport { recording } from \"../extensions.mjs\";\nimport { useBoothStore } from \"../store.mjs\";\nimport { Editor } from \"./Editor.mjs\";\n/** Recording editor. */\nexport const Record = (props) => {\n    const { captureKeys = {\n        \"Mod-Enter\": \"run\",\n        \"Mod-K\": \"clear\",\n        \"Mod-L\": \"clear\",\n    }, extensions = [], group = \"default\", passKeys = [\"Mod-Alt-2\", \"Mod-Alt-3\", \"Mod-Alt-4\"], ...attrs } = props;\n    const store = useBoothStore();\n    const lqvKeymap = useKeymap();\n    const newExtensions = useMemo(() => lqvKeymap\n        ? [keymap.of(passThrough(lqvKeymap, passKeys)), ...extensions]\n        : extensions, [passKeys]);\n    // attach recording extensions --- this has to be done this way because\n    // the `shortcuts` Compartment will abort further handling of the sequence\n    useEffect(() => {\n        const state = store.getState();\n        const { view } = state.groups[group].files.find((file) => file.filename === props.filename);\n        view.dispatch({\n            effects: recording.reconfigure([\n                ...recording.get(view.state),\n                [state.recorder.extension(captureKeys)],\n            ]),\n        });\n        includeFilenameInRecording(state);\n    }, []);\n    return (_jsx(Editor, { content: props.content, extensions: newExtensions, ...attrs }));\n};\n/* NOOOOOOOOOO */\nconst modifiedRecorder = Symbol();\nfunction includeFilenameInRecording(state) {\n    // only do this if we are recording in multiple files\n    let recordingExtensions = 0;\n    outer: {\n        for (const group of Object.values(state.groups)) {\n            for (const { view } of group.files) {\n                const extnState = recording.get(view.state);\n                if (extnState instanceof Array && extnState.length > 0) {\n                    recordingExtensions++;\n                    if (recordingExtensions > 1)\n                        break outer;\n                }\n            }\n        }\n    }\n    if (recordingExtensions < 2) {\n        return;\n    }\n    // be idempotent\n    if (state.recorder[modifiedRecorder]) {\n        return;\n    }\n    // intercept beginRecording\n    const beginRecording = state.recorder.beginRecording.bind(state.recorder);\n    state.recorder.beginRecording = (...args) => {\n        // have to call existing beginRecording() FIRST in order to\n        // set state.recorder.duration, otherwise we get negative times!\n        beginRecording(...args);\n        state.recorder.capture(0, selectCmd + state.getActiveFile().filename);\n    };\n    state.recorder[modifiedRecorder] = true;\n}\n","/**\n * Concatenate several ReplayData together, with delays.\n * @param args [ReplayData, delay] objects to join\n * @returns Concatenated replay data\n */\nexport function concat(...args) {\n    const [head, ...tail] = args;\n    const ret = [...head[0]];\n    let ptr = head[1] + length(head[0]);\n    for (const [data, start] of tail) {\n        const copy = data.slice();\n        copy[0][0] += start - ptr;\n        ret.push(...copy);\n        ptr += length(copy);\n    }\n    return ret;\n}\n/**\n * Get the total duration of replay data.\n * @param data ReplayData item\n * @returns Duration of replay data\n */\nexport function length(data) {\n    return data.map((_) => _[0]).reduce((a, b) => a + b, 0);\n}\n","import \"./Record.css\";\n\nimport {AudioRecorder, RecordingManager} from \"@liqvid/recording\";\nimport {length} from \"@liqvid/utils/replay-data\";\nimport {CodeRecorder} from \"@lqv/codemirror/recording\";\nimport {useCallback, useEffect, useState} from \"react\";\n\ntype CodingData = ReturnType<CodeRecorder[\"finalizeRecording\"]>;\ntype RecordingData = {\n  audio: Blob;\n  coding: CodingData;\n};\n\nconst manager = new RecordingManager();\nconst audioRecorder = new AudioRecorder();\naudioRecorder.requestRecording();\nexport const codeRecorder = new CodeRecorder();\n\nexport function RecordingControl() {\n  const [active, setActive] = useState(false);\n  const [data, setData] = useState<RecordingData>();\n\n  /* prevent CRA reload when recording */\n  useEffect(() => {\n    if (!data) {\n      return;\n    }\n    const warn = (e: BeforeUnloadEvent) => e.returnValue = \"You have recording data\";\n    window.addEventListener(\"beforeunload\", warn);\n    return () => window.removeEventListener(\"beforeunload\", warn);\n  }, [data]);\n\n  const toggleRecording = useCallback(() => {\n    if (active) {\n      (manager.endRecording() as Promise<RecordingData>).then(\n        (recordingData) => {\n          setData(recordingData);\n        }\n      );\n    } else {\n      manager.beginRecording({\n        audio: audioRecorder,\n        coding: codeRecorder\n      });\n    }\n    setActive(!active);\n  }, [active]);\n\n  return (\n    <div className=\"lqv-recording\">\n      <h2>Recording</h2>\n      <button aria-pressed={active} onClick={toggleRecording}>\n        <svg aria-hidden=\"true\" viewBox=\"-2 -2 4 4\">\n          <circle fill={active ? \"red\" : \"#aaa\"} cx=\"0\" cy=\"0\" r=\"1\" />\n        </svg>\n        Record\n      </button>\n      {data && (\n        <output>\n          <p>\n            Duration: <code>{length(data.coding) / 1000}</code>\n          </p>\n          <p>\n            Save this as <code>public/audio.webm</code>:\n            <a download=\"audio.webm\" href={URL.createObjectURL(data.audio)}>\n              Download Audio\n            </a>\n          </p>\n          <p>\n            Copy this into <code>public/recordings.json</code>:\n          </p>\n          <textarea readOnly value={JSON.stringify(data.coding)} />\n        </output>\n      )}\n    </div>\n  );\n}\n","import \"../codebooth.css\";\nimport \"../style.css\";\nimport \"../syntax.css\";\n\nimport {python} from \"@codemirror/lang-python\";\nimport {syntaxHighlighting} from \"@codemirror/language\";\nimport {classHighlighter} from \"@lezer/highlight\";\nimport {basicSetup, Buttons, Clear, CodeBooth, Console, EditorPanel, Record, Resize, Run} from \"@lqv/codebooth\";\nimport {PythonRun} from \"@lqv/codebooth/python\";\nimport {codeRecorder, RecordingControl} from \"./Record\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <CodeBooth recorder={codeRecorder}>\n        <section className=\"lqv-sidebar\">\n          <h2>Code</h2>\n          <Buttons>\n            <Run />\n            <Clear />\n          </Buttons>\n          <RecordingControl />\n        </section>\n        <EditorPanel filename=\"untitled.py\">\n          <Record\n            extensions={[python(), basicSetup, syntaxHighlighting(classHighlighter)]}\n          />\n        </EditorPanel>\n        <Resize min={.1} max={.3} />\n        <Resize dir=\"ns\" min={0.04} max={.5} />\n        <PythonRun />\n        <Console />\n      </CodeBooth>\n    </div>\n  );\n}\n\nexport default App;\n"],"names":["symbol","Symbol","for","globalThis","createContext","KeymapContext","modifierMap","Control","Alt","Shift","Meta","mixedCase","key","toLowerCase","modifierOrder","Object","keys","map","k","useCode","Keymap","this","__bindings","seq","cb","indexOf","split","atomic","bind","normalize","hasOwnProperty","push","unbind","Error","index","name","splice","length","slice","e","identify","preventDefault","parts","modifier","getModifierState","code","startsWith","includes","join","str","lower","toUpperCase","sort","a","b","cmp","passThrough","keymap","seqs","can","cm2lv","fake","KeyboardEvent","run","handlers","getHandlers","mac","navigator","platform","replace","Record","props","captureKeys","extensions","group","passKeys","attrs","store","useBoothStore","lqvKeymap","useContext","newExtensions","useMemo","useEffect","state","getState","view","groups","files","find","file","filename","dispatch","effects","recording","recorder","extension","recordingExtensions","outer","values","extnState","Array","modifiedRecorder","beginRecording","capture","selectCmd","getActiveFile","includeFilenameInRecording","_jsx","Editor","content","data","_","reduce","manager","RecordingManager","audioRecorder","AudioRecorder","requestRecording","codeRecorder","CodeRecorder","RecordingControl","useState","active","setActive","setData","warn","returnValue","window","addEventListener","removeEventListener","toggleRecording","useCallback","endRecording","then","recordingData","audio","coding","className","onClick","viewBox","fill","cx","cy","r","download","href","URL","createObjectURL","readOnly","value","JSON","stringify","EditorPanel","python","basicSetup","syntaxHighlighting","classHighlighter","Resize","min","max","dir","Console"],"sourceRoot":""}