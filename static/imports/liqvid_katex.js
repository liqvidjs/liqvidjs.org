!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("React"),require("Liqvid")):"function"==typeof define&&define.amd?define(["React","Liqvid"],r):"object"==typeof exports?exports.Liqvid_Katex=r(require("React"),require("Liqvid")):e.Liqvid_Katex=r(e.React,e.Liqvid)}(self,((e,r)=>(()=>{"use strict";var t={830:(e,r,t)=>{var n=t(24),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function u(e,r,t){var n,s={},u=null,l=null;for(n in void 0!==t&&(u=""+t),void 0!==r.key&&(u=""+r.key),void 0!==r.ref&&(l=r.ref),r)c.call(r,n)&&!i.hasOwnProperty(n)&&(s[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===s[n]&&(s[n]=r[n]);return{$$typeof:o,type:e,key:u,ref:l,props:s,_owner:a.current}}r.jsx=u},293:(e,r,t)=>{e.exports=t(830)},290:e=>{e.exports=r},24:r=>{r.exports=e}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{o.r(s),o.d(s,{KTX:()=>f,KaTeXReady:()=>u,RenderGroup:()=>d});var e=o(293),r=o(24);function t(e,n){return r.Children.map(e,(e=>(0,r.isValidElement)(e)?("children"in e.props&&(e=(0,r.cloneElement)(e,{children:t(e.props.children,n)})),n(e)):e))}function n(e=[]){const t=(0,r.useRef)(),n=(0,r.useRef)();return[(0,r.useMemo)((()=>new Promise(((e,r)=>{t.current=e,n.current=r}))),e),t.current,n.current]}var c=o(290);const a=new Promise((e=>{const r=document.querySelector('script[src*="katex.js"], script[src*="katex.min.js"]');r&&(window.hasOwnProperty("katex")?e(katex):r.addEventListener("load",(()=>e(katex))))})),i=new Promise((e=>{const r={},t=Array.from(document.querySelectorAll("head > script[type='math/tex']"));return Promise.all(t.map((e=>fetch(e.src).then((r=>{if(r.ok)return r.text();throw new Error(`${r.status} ${r.statusText}: ${e.src}`)})).then((e=>{Object.assign(r,function(e){const r={},t=/\\(?:ktx)?newcommand\{(.+?)\}(?:\[\d+\])?\{/g;let n;for(;n=t.exec(e);){let t="";const o=n[1];let s=1;for(let r=n.index+n[0].length;s>0&&r<e.length;++r){const n=e[r];if("{"===n)s++;else if("}"===n){if(s--,0===s)break}else if("\\"===n){t+=e.slice(r,r+2),++r;continue}t+=n}r[o]=t}return r}(e))}))))).then((()=>e(r)))})),u=Promise.all([a,i]);const l=(0,r.forwardRef)((function(t,o){const s=(0,r.useRef)(),{children:c,display:a=!1,...i}=t,[l,f]=n();return(0,r.useImperativeHandle)(o,(()=>({domElement:s.current,ready:l}))),(0,r.useEffect)((()=>{u.then((([e,r])=>{e.render(c.toString(),s.current,{displayMode:!!a,macros:r,strict:"ignore",throwOnError:!1,trust:!0});const t=s.current.firstElementChild;for(let n=0,o=t.classList.length;n<o;++n)s.current.classList.add(t.classList.item(n));for(;t.childNodes.length>0;)s.current.appendChild(t.firstChild);t.remove(),f()}))}),[c]),a&&(i.style||(i.style={}),i.style.display="block"),(0,e.jsx)("span",{...i,ref:s})})),f=(0,r.forwardRef)((function(t,n){const{obstruct:o="canplay canplaythrough",reparse:s=!1,...a}=t,i=(0,r.useRef)(),u=function(...e){return r=>{for(const t of e)"function"==typeof t?t(r):null===t||"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=r)}}(i,n),f=(0,c.usePlayer)();return(0,r.useEffect)((()=>{o.match(/\bcanplay\b/)&&f.obstruct("canplay",i.current.ready),o.match("canplaythrough")&&f.obstruct("canplaythrough",i.current.ready),s&&i.current.ready.then((()=>f.reparseTree(i.current.domElement)))}),[]),(0,e.jsx)(l,{ref:u,...a})})),d=(0,r.forwardRef)((function(e,o){const[s,a]=n();(0,r.useImperativeHandle)(o,(()=>({ready:s})));const i=(0,r.useRef)([]),u=(0,r.useRef)([]),d=(0,c.usePlayer)();return(0,r.useEffect)((()=>{Promise.all(u.current).then((()=>{e.reparse&&d.reparseTree(function(e){if(0===e.length)throw new Error("Must pass at least one element");let r=e[0],t=e.slice(1);for(;t.length>0;)r=r.parentElement,t=t.filter((e=>!r.contains(e)));return r}(i.current)),a()}))}),[]),t(e.children,(e=>{if(function(e){return(0,r.isValidElement)(e)&&"object"==typeof e.type&&(e.type===f||e.type===l)}(e)){const t=e.ref;return(0,r.cloneElement)(e,{ref:e=>{e&&(i.current.push(e.domElement),u.current.push(e.ready),"function"==typeof t?t(e):t&&"object"==typeof t&&(t.current=e))}})}return e}))}))})(),s})()));